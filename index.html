<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Red de Especialistas del Proyecto Mesoamérica">
    <title>Red de Especialistas - Proyecto Mesoamérica</title>
    
    <!-- Preconnect para fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Google Fonts - Tipografías modernas y profesionales -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="directorio-styles.css">
</head>
<body>

<!-- Banner -->
<div class="banner-container">
    <img src="https://proyectomesoamerica.org/images/Biblioteca/Banner-Biblioteca.jpg" 
         alt="Banner Directorio Redes Sectoriales" 
         class="banner-img"
         loading="lazy">
    <div class="banner-overlay">
        <h1 class="banner-title">Red de Especialistas</h1>
        <p class="banner-subtitle">Proyecto Mesoamérica</p>
    </div>
</div>

<!-- Descripción del Directorio -->
<div class="directory-description">
    <div class="container">
        <div class="description-card">
            <div class="description-icon">
                <i class="fas fa-users-between-lines"></i>
            </div>
            <div class="description-content">
                <h2 class="description-title">Sobre este Directorio</h2>
                <p class="description-text">
                    Este espacio reúne información de contacto y áreas de especialización de los profesionales que integran las redes sectoriales del Proyecto Mesoamérica, facilitando la colaboración técnica, el intercambio de información y la articulación regional entre los enlaces de <strong>Energía</strong>, <strong>Transformación Digital</strong>, <strong>Transporte</strong> y <strong>Facilitación del Comercio</strong> + enlaces del <strong>socioambiental</strong>.
                </p>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid main-container">
    <div class="row">
        <!-- Sidebar de Sectores -->
        <aside class="col-lg-3 col-md-4 sidebar-container">
            <div class="categories-wrapper">
                <!-- Botón Solicitar Registro -->
                <a href="https://forms.gle/HRkPxBwdpM7dMKEK8" 
                   target="_blank" 
                   class="btn btn-primary btn-block btn-new-register mb-3"
                   onclick="registrarEvento('Solicitar Nuevo Registro', 'Clic')">
                    <i class="fas fa-user-plus"></i> 
                    <span>Solicitar Nuevo Registro</span>
                </a>

                <!-- Botón Descargar PDF -->
                <button id="downloadPdfBtn" 
                        class="btn btn-danger btn-block btn-download-pdf mb-4"
                        title="Descargar directorio en PDF con filtros aplicados">
                    <i class="fas fa-file-pdf"></i> 
                    <span>Descargar Directorio PDF</span>
                </button>

                <h5 class="categories-title">
                    <i class="fas fa-filter"></i> Sectores
                </h5>
                <ul id="sectors" class="list-group categories-list">
                    <!-- Los sectores y subsectores se cargarán dinámicamente -->
                </ul>

                <!-- Estadísticas Rápidas -->
                <div class="quick-stats mt-4">
                    <h6 class="stats-title">
                        <i class="fas fa-chart-bar"></i> Estadísticas
                    </h6>
                    <div class="stat-item">
                        <span class="stat-label">Total de Miembros:</span>
                        <span class="stat-value" id="totalMembers">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Países Representados:</span>
                        <span class="stat-value" id="totalCountries">0</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Contenido Principal -->
        <main class="col-lg-9 col-md-8 content-container">
            <!-- Barra de Búsqueda y Controles -->
            <div class="search-controls">
                <div class="row align-items-center">
                    <div class="col-md-8 mb-3 mb-md-0">
                        <div class="search-wrapper">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" 
                                   id="searchInput" 
                                   class="form-control search-input" 
                                   placeholder="Buscar por nombre, institución, cargo, país o correo..."
                                   autocomplete="off"
                                   aria-label="Buscar miembros">
                            <button id="clearSearch" 
                                    class="btn btn-sm clear-search" 
                                    style="display: none;"
                                    aria-label="Limpiar búsqueda">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <select id="sortSelect" 
                                class="form-control custom-select"
                                aria-label="Ordenar resultados">
                            <option value="name-asc">Nombre (A-Z)</option>
                            <option value="name-desc">Nombre (Z-A)</option>
                            <option value="country-asc">País (A-Z)</option>
                            <option value="institution-asc">Institución (A-Z)</option>
                        </select>
                    </div>
                </div>
                
                <!-- Resultados y Toggle de Vista -->
                <div class="results-bar">
                    <span id="resultsCount" class="results-text">
                        <i class="fas fa-users"></i> Mostrando <strong>0</strong> miembros
                    </span>
                    <div class="view-toggle">
                        <button id="viewGrid" 
                                class="btn btn-sm btn-outline-secondary" 
                                title="Vista en cuadrícula"
                                aria-label="Vista en cuadrícula">
                            <i class="fas fa-th"></i>
                        </button>
                        <button id="viewList" 
                                class="btn btn-sm btn-outline-secondary active" 
                                title="Vista en lista"
                                aria-label="Vista en lista">
                            <i class="fas fa-list"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Loading Spinner -->
            <div id="loadingSpinner" class="loading-spinner" style="display: none;">
                <div class="spinner-border text-primary" role="status">
                    <span class="sr-only">Cargando...</span>
                </div>
                <p class="mt-3">Cargando directorio...</p>
            </div>

            <!-- Mensaje de Sin Resultados -->
            <div id="noResults" class="no-results" style="display: none;">
                <i class="fas fa-user-slash fa-3x text-muted mb-3"></i>
                <h5>No se encontraron miembros</h5>
                <p>Intenta con otros términos de búsqueda o selecciona un sector diferente.</p>
            </div>

            <!-- Lista de Miembros -->
            <div id="members-list" class="members-list view-list">
                <!-- Los miembros se cargarán dinámicamente aquí -->
            </div>

            <!-- Paginación -->
            <nav aria-label="Paginación de miembros">
                <div id="paginationContainer" class="pagination-wrapper">
                    <!-- La paginación se generará dinámicamente -->
                </div>
            </nav>
        </main>
    </div>
</div>

<!-- Toast de Confirmación -->
<div id="toast" class="toast-notification" style="display: none;">
    <div class="toast-content">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Acción completada</span>
    </div>
</div>

<!-- Modal de Detalle de Miembro -->
<div class="modal fade" id="memberModal" tabindex="-1" role="dialog" aria-labelledby="modalMemberName" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalMemberName">Detalle del Miembro</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="modalMemberBody">
                <!-- Contenido del modal se generará dinámicamente -->
            </div>
        </div>
    </div>
</div>

<!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<!-- jsPDF para generar PDFs -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<!-- Archivos del proyecto -->
<script src="member-data.js"></script>
<script src="directorio-script.js"></script>
</body>
</html>